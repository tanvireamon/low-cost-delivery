<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Complaint Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center fw-bold" href="#">
      <img th:src="@{/images/logo.png}" alt="Logo" width="40" height="40" class="me-2" />
      Low Cost Delivery System
    </a>
    <div class="collapse navbar-collapse justify-content-end">
      <ul class="navbar-nav me-3">
        <li class="nav-item"><a class="nav-link" th:href="@{/viewadmin}">Home</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/admin/complaints}">Back</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container my-4">
  <h4>Complaint Details</h4>

  <p><b>Complaint ID:</b> <span th:text="${complaint.id}">C9001</span></p>
  <p><b>Customer:</b> <span th:text="${complaint.customerName}">Rahim</span></p>
  <p><b>Category:</b> <span th:text="${complaint.category}">Late Delivery</span></p>
  <p><b>Status:</b>
    <span class="badge"
          th:classappend="${complaint.status=='OPEN'} ? 'bg-danger' : 'bg-success'"
          th:text="${complaint.status}">OPEN</span>
  </p>

  <p><b>Message:</b></p>
  <div class="alert alert-light" th:text="${complaint.message}">Parcel arrived late</div>

  <form th:action="@{/admin/complaints/{id}/resolve(id=${complaint.id})}" method="post">
    <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <label class="form-label"><b>Admin Reply</b></label>
    <textarea class="form-control mb-3" name="adminReply" rows="3"
              placeholder="Admin reply"
              th:text="${complaint.adminReply}"></textarea>

    <button type="submit" class="btn btn-success"
            th:disabled="${complaint.status=='RESOLVED'}">
      Resolve
    </button>

    <a class="btn btn-secondary" th:href="@{/admin/complaints}">Back</a>
  </form>

</div>

</body>
</html>
